// Language translations
const translations = {
    en: {
        // Navigation
        'nav-home': 'Home',
        'nav-about': 'About',
        'nav-portfolio': 'Portfolio',
        'nav-testimonials': 'Testimonials',
        'nav-contact': 'Contact',
        'cta-btn': "Let's Talk",

        // Hero section
        'greeting': "Hi, I'm",
        'accent-name': 'Reynaldi',
        'professions': ['Data Analyst', 'Business Intelligence Analyst', 'Business Analyst', 'Data Driven Insights'],
        'hero-desc': 'Transforming data into valuable insights for strategic decision-making. Passionate about data visualization and business analysis to drive sustainable growth.',
        'social-label': 'Follow me on:',
        'explore-projects': 'Explore My Project',
        'download-cv': 'Download CV',

        // Stats
        'stats-label': 'Quick Stats:',
        'stat-projects': 'Projects',
        'stat-skills': 'Skills',
        'stat-certifications': 'Certifications',

        // Portfolio section
        'portfolio-title': 'Portfolio Showcase',
        'portfolio-subtitle': 'Projects, Certificates, and Technical Skills â€” explore my work and credentials.',
        'tab-projects': 'Projects',
        'tab-certificates': 'Certificates',
        'tab-tech': 'Technical Skills',
        'btn-live-demo': 'Live Demo',
        'btn-details': 'Details',
        'see-more': 'See More',
        'see-less': 'See Less',

        // Testimonials
        'testimonials-title': 'What People Say',
        'testimonials-subtitle': 'Voices from clients, collaborators, and friends who have experienced my work.',
        'no-testimonials': 'No Testimonials Yet',
        'testimonials-empty': 'Be the first to share your experience and inspire others with your story!',
        'add-testimonial': 'Add Testimonial',

        // Contact section
        'contact-title': 'Contact Me',
        'contact-subtitle': 'Have questions? Send me a message, and I will get back to you soon.',
        'form-name': 'Your Name',
        'form-email': 'Your Email',
        'form-message': 'Your Message',
        'form-privacy': '*Your information is private and will not be shared.',
        'send-message': 'Send Message',
        'connect-with': 'Connect With Me',
        'connect-subtitle': "Let's connect on social platforms",

        // Comments
        'comments-label': 'Comments',
        'comment-name': 'Name *',
        'comment-message': 'Message *',
        'post-comment': 'Post Comment',
        'max-file-size': 'Max file size: 5MB',
        'choose-photo': 'Choose Profile Photo',
        'pinned-comment': 'Pinned comment â€¢ Dec 20, 2025',
        'pinned-thanks': 'Thanks for visiting! Contact me if you need anything.',

        // About section
        'about-title': 'About The Data Analyst',
        'about-subtitle': 'Discover my journey, expertise, and the passion that drives my work in data analytics.',
        'who-am-i': 'Who Am I?',
        'who-am-i-desc': 'Fresh graduate turned data analyst. While studying Business Management, I discovered something powerful: data bridges business problems and smart solutions. I taught myself SQL, Python, Power BI, Tableau, and Excel because I knew this was my path. My business degree isn\'t a setbackâ€”it\'s my superpower. I speak both languages: business strategy and technical insights. I understand how companies operate, which metrics drive decisions, and how to deliver analysis that actually matters. Ready to turn your data into impact.',
        'tools-mastered': 'TOOLS MASTERED',
        'portfolio-projects': 'PORTFOLIO PROJECTS',
        'current-focus': 'Current Focus',
        'current-focus-desc': 'Building Targeted Portfolio Projects that analyze companies with open data analyst rolesâ€”identifying real opportunities and creating relevant case studies.',
        'company-analysis': 'Company Analysis',
        'real-world-data': 'Real-World Data',
        'strategic-insights': 'Strategic Insights',
        'base-station': 'Base Station',
        'location': 'Jakarta, Indonesia (GMT+7)',
        'open-for-remote': 'Open for Remote Work',
        'core-stack': 'Core Stack',

        // Contact section details
        'get-in-touch': 'Get in Touch',
        'get-in-touch-desc': 'Want to discuss something? Send me a message and let\'s talk.',
        'comments-header': 'Comments',
        'comments-pinned-label': 'Pinned & recent comments',
        'comment-form-name': 'Your Name',
        'comment-form-email': 'Your Email',
        'comment-form-message': 'Your Message',
        'choose-profile-photo': 'Choose Profile Photo',
    },
    id: {
        // Navigation
        'nav-home': 'Beranda',
        'nav-about': 'Tentang',
        'nav-portfolio': 'Portofolio',
        'nav-testimonials': 'Testimoni',
        'nav-contact': 'Kontak',
        'cta-btn': 'Mari Berbicara',

        // Hero section
        'greeting': 'Hai, Saya',
        'accent-name': 'Reynaldi',
        'professions': ['Data Analyst', 'Business Intelligence Analyst', 'Business Analyst', 'Data Driven Insights'],
        'hero-desc': 'Mengubah data menjadi insight bernilai untuk pengambilan keputusan strategis. Passionate dalam visualisasi data dan analisis bisnis untuk mendorong pertumbuhan berkelanjutan.',
        'social-label': 'Ikuti saya di:',
        'explore-projects': 'Jelajahi Proyek Saya',
        'download-cv': 'Unduh CV',

        // Stats
        'stats-label': 'Statistik Cepat:',
        'stat-projects': 'Proyek',
        'stat-skills': 'Skill',
        'stat-certifications': 'Sertifikasi',

        // Portfolio section
        'portfolio-title': 'Pamer Portofolio',
        'portfolio-subtitle': 'Proyek, Sertifikat, dan Keahlian Teknis â€” jelajahi pekerjaan dan kredensial saya.',
        'tab-projects': 'Proyek',
        'tab-certificates': 'Sertifikat',
        'tab-tech': 'Keahlian Teknis',
        'btn-live-demo': 'Demo Live',
        'btn-details': 'Detail',
        'see-more': 'Lihat Lebih',
        'see-less': 'Lihat Lebih Sedikit',

        // Testimonials
        'testimonials-title': 'Apa Kata Orang',
        'testimonials-subtitle': 'Suara dari klien, kolaborator, dan teman yang telah mengalami pekerjaan saya.',
        'no-testimonials': 'Belum Ada Testimoni',
        'testimonials-empty': 'Jadilah yang pertama berbagi pengalaman Anda dan menginspirasi orang lain dengan cerita Anda!',
        'add-testimonial': 'Tambah Testimoni',

        // Contact section
        'contact-title': 'Hubungi Saya',
        'contact-subtitle': 'Ada pertanyaan? Kirim pesan kepada saya, dan saya akan membalas segera.',
        'form-name': 'Nama Anda',
        'form-email': 'Email Anda',
        'form-message': 'Pesan Anda',
        'form-privacy': '*Informasi Anda bersifat pribadi dan tidak akan dibagikan.',
        'send-message': 'Kirim Pesan',
        'connect-with': 'Terhubung dengan Saya',
        'connect-subtitle': 'Mari terhubung di platform sosial',

        // Comments
        'comments-label': 'Komentar',
        'comment-name': 'Nama *',
        'comment-message': 'Pesan *',
        'post-comment': 'Posting Komentar',
        'max-file-size': 'Ukuran file maksimal: 5MB',
        'choose-photo': 'Pilih Foto Profil',
        'pinned-comment': 'Komentar tertarik â€¢ 20 Des, 2025',
        'pinned-thanks': 'Terima kasih telah berkunjung! Hubungi saya jika Anda membutuhkan sesuatu.',

        // About section
        'about-title': 'Tentang Analis Data',
        'about-subtitle': 'Temukan perjalanan, keahlian, dan passion yang mendorong pekerjaan saya di bidang analitik data.',
        'who-am-i': 'Siapa Saya?',
        'who-am-i-desc': 'Fresh graduate yang menjadi data analyst. Saat belajar Business Management, saya menemukan sesuatu yang powerful: data menghubungkan masalah bisnis dengan solusi cerdas. Saya belajar mandiri SQL, Python, Power BI, Tableau, dan Excel karena saya tahu ini adalah jalan saya. Gelar bisnis saya bukan kekuranganâ€”itu adalah superpower saya. Saya berbicara dua bahasa: strategi bisnis dan technical insights. Saya memahami bagaimana perusahaan beroperasi, metrik apa yang mendorong keputusan, dan cara memberikan analisis yang benar-benar penting. Siap mengubah data Anda menjadi dampak.',
        'tools-mastered': 'TOOLS DIKUASAI',
        'portfolio-projects': 'PROYEK PORTOFOLIO',
        'current-focus': 'Fokus Saat Ini',
        'current-focus-desc': 'Membangun Targeted Portfolio Projects yang menganalisis perusahaan dengan posisi data analyst terbukaâ€”mengidentifikasi peluang nyata dan membuat case studies relevan.',
        'company-analysis': 'Analisis Perusahaan',
        'real-world-data': 'Data Real-World',
        'strategic-insights': 'Strategic Insights',
        'base-station': 'Lokasi Basis',
        'location': 'Jakarta, Indonesia (GMT+7)',
        'open-for-remote': 'Terbuka untuk Remote Work',
        'core-stack': 'Core Stack',

        // Contact section details
        'get-in-touch': 'Mari Berbicara',
        'get-in-touch-desc': 'Ingin mendiskusikan sesuatu? Kirim pesan kepada saya dan mari kita bicara.',
        'comments-header': 'Komentar',
        'comments-pinned-label': 'Komentar tertarik & terbaru',
        'comment-form-name': 'Nama Anda',
        'comment-form-email': 'Email Anda',
        'comment-form-message': 'Pesan Anda',
        'choose-profile-photo': 'Pilih Foto Profil',
    }
};

// Get current language from localStorage or default to 'en'
function getCurrentLanguage() {
    return localStorage.getItem('selectedLanguage') || 'en';
}

// Set language in localStorage
function setLanguage(lang) {
    localStorage.setItem('selectedLanguage', lang);
}

// Get translation string
function t(key) {
    const lang = getCurrentLanguage();
    return translations[lang]?.[key] || translations['en'][key] || key;
}

// Switch language on entire page
function switchLanguage(lang) {
    if (!translations[lang]) return;
    
    setLanguage(lang);
    updatePageLanguage(lang);
    updateLanguagePill(lang);
}

// Update language pill button
function updateLanguagePill(lang) {
    const langPill = document.querySelector('.lang-pill');
    if (langPill) {
        langPill.textContent = lang.toUpperCase();
        langPill.dataset.lang = lang;
    }
}

// Update all text on page
function updatePageLanguage(lang) {
    // Update navigation
    const navLinks = document.querySelectorAll('.nav-menu li a');
    const navTexts = ['nav-home', 'nav-about', 'nav-portfolio', 'nav-testimonials', 'nav-contact'];
    navLinks.forEach((link, index) => {
        if (navTexts[index]) {
            const icon = link.querySelector('i');
            if (icon) {
                link.innerHTML = `${icon.outerHTML}<span>${t(navTexts[index])}</span>`;
            }
        }
    });

    // Update CTA button
    const ctaBtn = document.querySelector('.cta-btn');
    if (ctaBtn) ctaBtn.textContent = t('cta-btn');

    // Update hero greeting
    const greeting = document.querySelector('.greeting');
    if (greeting) {
        greeting.innerHTML = `${t('greeting')} <span class="accent">${t('accent-name')}</span> ðŸ‘‹`;
    }

    // Update hero description
    const heroDesc = document.querySelector('.hero-desc');
    if (heroDesc) heroDesc.textContent = t('hero-desc');

    // Update social label
    const socialLabel = document.querySelector('.social-label');
    if (socialLabel) socialLabel.textContent = t('social-label');

    // Update hero buttons
    const exploreBtns = document.querySelectorAll('.explore-projects');
    exploreBtns.forEach(btn => {
        const span = btn.querySelector('span');
        if (span) span.textContent = t('explore-projects');
    });

    const downloadBtns = document.querySelectorAll('.download-cv');
    downloadBtns.forEach(btn => {
        const span = btn.querySelector('span');
        if (span) span.textContent = t('download-cv');
    });

    // Update stats
    const statsLabel = document.querySelector('.stats-label');
    if (statsLabel) statsLabel.textContent = t('stats-label');

    const statLabels = document.querySelectorAll('.stat-label-text');
    const statTexts = ['stat-projects', 'stat-skills', 'stat-certifications'];
    statLabels.forEach((label, index) => {
        if (statTexts[index]) label.textContent = t(statTexts[index]);
    });

    // Update About section
    const aboutSection = document.querySelector('#about');
    if (aboutSection) {
        const titleInAbout = aboutSection.querySelector('.about-title');
        if (titleInAbout) titleInAbout.textContent = t('about-title');
        
        const subtitleInAbout = aboutSection.querySelector('.about-subtitle');
        if (subtitleInAbout) subtitleInAbout.textContent = t('about-subtitle');
    }

    // Update all elements with data-i18n attribute
    const i18nElements = document.querySelectorAll('[data-i18n]');
    i18nElements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (key) {
            el.textContent = t(key);
        }
    });

    // Update portfolio section title & subtitle
    const portfolioSection = document.querySelector('#portfolio');
    if (portfolioSection) {
        const titleInPortfolio = portfolioSection.querySelector('.section-title');
        if (titleInPortfolio) titleInPortfolio.textContent = t('portfolio-title');
        
        const subtitleInPortfolio = portfolioSection.querySelector('.section-subtitle');
        if (subtitleInPortfolio) subtitleInPortfolio.textContent = t('portfolio-subtitle');
    }

    // Update portfolio tabs
    const tabs = document.querySelectorAll('.portfolio-tab span');
    const tabTexts = ['tab-projects', 'tab-certificates', 'tab-tech'];
    tabs.forEach((tab, index) => {
        if (tabTexts[index]) tab.textContent = t(tabTexts[index]);
    });

    // Update See More buttons in portfolio and certificates sections
    const seeMoreWrappers = document.querySelectorAll('.see-more-wrapper');
    seeMoreWrappers.forEach(wrapper => {
        const btn = wrapper.querySelector('.see-more-btn');
        if (btn) {
            const span = btn.querySelector('span');
            if (span) {
                const currentText = span.textContent.trim();
                
                // Determine if this is a "See More" or "See Less" button based on current text
                // More robust check for both English and Indonesian
                const isSeeLess = currentText.toLowerCase().includes('less') || 
                                  currentText.toLowerCase().includes('sedikit') ||
                                  currentText.includes('Show Less');
                
                if (isSeeLess) {
                    btn.innerHTML = `<span>${t('see-less')}</span><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18 15 12 9 6 15"></polyline></svg>`;
                } else {
                    btn.innerHTML = `<span>${t('see-more')}</span><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>`;
                }
            }
        }
    });

    // Update testimonials section
    const testimonialSection = document.querySelector('#testimonials');
    if (testimonialSection) {
        const titleInTestimonials = testimonialSection.querySelector('.section-title');
        if (titleInTestimonials) titleInTestimonials.textContent = t('testimonials-title');
        
        const subtitleInTestimonials = testimonialSection.querySelector('.section-subtitle');
        if (subtitleInTestimonials) subtitleInTestimonials.textContent = t('testimonials-subtitle');
    }

    // Update contact section
    const contactSection = document.querySelector('#contact');
    if (contactSection) {
        const titleInContact = contactSection.querySelector('.section-title');
        if (titleInContact) titleInContact.textContent = t('contact-title');
        
        const subtitleInContact = contactSection.querySelector('.contact-subtitle');
        if (subtitleInContact) subtitleInContact.textContent = t('contact-subtitle');
    }

    // Update contact form - Get in Touch
    const contactFormTitle = document.querySelector('.contact-form-title');
    if (contactFormTitle) contactFormTitle.textContent = t('get-in-touch');
    
    const contactFormDesc = document.querySelector('.contact-form-desc');
    if (contactFormDesc) contactFormDesc.textContent = t('get-in-touch-desc');

    // Update contact form inputs
    const contactNameInput = document.querySelector('#c-name');
    if (contactNameInput) contactNameInput.placeholder = t('comment-form-name');
    
    const contactEmailInput = document.querySelector('#c-email');
    if (contactEmailInput) contactEmailInput.placeholder = t('comment-form-email');

    const contactMessageInput = document.querySelector('#c-message');
    if (contactMessageInput) contactMessageInput.placeholder = t('form-message');

    // Update comments section
    const commentsTitle = document.querySelector('.comments-header h3');
    if (commentsTitle) {
        const countSpan = commentsTitle.querySelector('.comments-count');
        const commentText = commentsTitle.querySelector('[data-i18n="comments-header"]');
        
        if (commentText) {
            commentText.textContent = t('comments-header');
        }
        
        // Update comment count if span exists
        if (countSpan) {
            const commentList = document.querySelector('.comment-list');
            if (commentList) {
                const totalComments = commentList.querySelectorAll('.comment-item').length;
                countSpan.textContent = `(${totalComments})`;
            }
        }
    }

    const commentsPinned = document.querySelector('.comments-header > .muted');
    if (commentsPinned) commentsPinned.textContent = t('comments-pinned-label');

    // Update comment form inputs
    const cmNameInput = document.querySelector('#cm-name');
    if (cmNameInput) cmNameInput.placeholder = t('comment-form-name');
    
    const cmMessageInput = document.querySelector('#cm-message');
    if (cmMessageInput) cmMessageInput.placeholder = t('comment-form-message');

    const chooseFileBtn = document.querySelector('.choose-file-btn');
    if (chooseFileBtn) chooseFileBtn.textContent = t('choose-profile-photo');

    // Update privacy notice in contact form
    const privacyNote = document.querySelector('.contact-form .form-helper');
    if (privacyNote) privacyNote.textContent = t('form-privacy');

    // Update Send Message button
    const sendMessageBtns = document.querySelectorAll('.contact-form .btn-gradient');
    sendMessageBtns.forEach(btn => {
        if (btn.querySelector('span')) {
            btn.querySelector('span').textContent = t('send-message');
        }
    });

    // Update Post Comment button
    const postCommentBtn = document.querySelector('.post-btn');
    if (postCommentBtn) postCommentBtn.textContent = t('post-comment');

    // Update Add Testimonial button
    const addTestimonialBtn = document.querySelector('.add-testimonial-btn');
    if (addTestimonialBtn) {
        addTestimonialBtn.innerHTML = `<i class="fas fa-plus"></i>\n                            ${t('add-testimonial')}`;
    }

    // Update max file size text
    const fileNameText = document.querySelector('.file-name');
    if (fileNameText) fileNameText.textContent = t('max-file-size');

    // Update pinned comment message
    const pinnedCommentText = document.querySelector('.comment-pinned p');
    if (pinnedCommentText) pinnedCommentText.textContent = t('pinned-thanks');

    // Update page language attribute
    document.documentElement.lang = lang;
}

// Initialize language on page load
function initializeLanguage() {
    const currentLang = getCurrentLanguage();
    updatePageLanguage(currentLang);
    updateLanguagePill(currentLang);
}
